{"ast":null,"code":"import _slicedToArray from\"/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{actionMusic}from'../redux/actions';import MusicList from'./Music/MusicList';import{useParams}from'react-router-dom';import MusicDetail from'./Music/MusicDetail';import LoadingBar from'../components/LoadingBar';import{jsx as _jsx}from\"react/jsx-runtime\";function Music(){var _useParams=useParams(),id=_useParams.id;var dispatch=useDispatch();/** RUN action  */useEffect(function(){dispatch(actionMusic());},[dispatch]);/** DRUPAL DATA CREATED BY CONTENT TYPE */var musicData=useSelector(function(state){return state.reducerMusic.music_data.data;});var musicDataFetched=useSelector(function(state){return state.reducerMusic.music_fetched;});var musicDataInc=useSelector(function(state){return state.reducerMusic.music_data.included;});console.log(\"MUSIC DATA\",musicData);console.log(\"FETCHED\",musicDataFetched);console.log(\"INCLUDED\",musicDataInc);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),arr=_useState2[0],setArr=_useState2[1];/** MERGE ARRAY BY id */function audioArray(arr1,arr2){var arr=[];/** GET AUDIO URI AND PUSH INTO THE ARR */function getAudioUri(audioId,arr2){arr2.map(function(item){return audioId===item.id&&arr.push(item.attributes.uri);});}/** GET AUDIO ID AND RUN FUNCTION TO GET URI */arr2.map(function(item){return item.type==='media--audio'&&arr1.some(function(el){return el.id===item.id;})&&getAudioUri(item.relationships.field_media_audio_file.data.id,arr2);});return arr;}/** GET IMAGE URI */function imageArray(id,arr2){var arr=[];/** GET IMAGE URI */function getUri(imageId,arr2){arr2.map(function(item){return item.id===imageId&&arr.push(item.attributes.uri);});}/** GET ID FOR IMAGE URI */arr2.map(function(item){return id===item.id&&getUri(item.relationships.field_media_image.data.id,arr2);});/** RETURN IMAGE-URI IN ARRAY */return arr;}/** GET YOUTBE - VIDEO URL */function videoArray(id,arr2){var arr=[];arr2.map(function(item){return id===item.id&&arr.push({youtube:item.attributes.field_media_oembed_video,name:item.attributes.name});});return arr;}useEffect(function(){var arr=[];musicDataFetched&&musicData.map(function(item){var _item$attributes=item.attributes,title=_item$attributes.title,processed=_item$attributes.field_music_body.processed;var audio=item.relationships.field_music_audio.data;var imageId=item.relationships.field_music_image.data.id;var videoId=item.relationships.field_music_video.data.id;return arr.push({id:item.id,title:title,body:processed,audio:audioArray(audio,musicDataInc),image:imageArray(imageId,musicDataInc),video:videoArray(videoId,musicDataInc)});});setArr(arr);},[musicData,musicDataFetched,musicDataInc]);console.log(\"NEW ARRAY\",arr,id);return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-screen-xl p-10 m-auto\",children:musicDataFetched?/** SECOND CODTIONTION */id?/*#__PURE__*/_jsx(MusicDetail,{index:id,arr:arr}):/*#__PURE__*/_jsx(MusicList,{listdata:arr})/******/:/*#__PURE__*/_jsx(LoadingBar,{})});}export default Music;","map":{"version":3,"sources":["/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/src/page/Music.js"],"names":["React","useEffect","useState","useSelector","useDispatch","actionMusic","MusicList","useParams","MusicDetail","LoadingBar","Music","id","dispatch","musicData","state","reducerMusic","music_data","data","musicDataFetched","music_fetched","musicDataInc","included","console","log","arr","setArr","audioArray","arr1","arr2","getAudioUri","audioId","map","item","push","attributes","uri","type","some","el","relationships","field_media_audio_file","imageArray","getUri","imageId","field_media_image","videoArray","youtube","field_media_oembed_video","name","title","processed","field_music_body","audio","field_music_audio","field_music_image","videoId","field_music_video","body","image","video"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {actionMusic} from '../redux/actions';\nimport MusicList from './Music/MusicList';\nimport {useParams} from 'react-router-dom';\nimport MusicDetail from './Music/MusicDetail';\nimport LoadingBar from '../components/LoadingBar';\n\nfunction Music(){\n\n  const {id} = useParams();\n\n  const dispatch = useDispatch();\n\n/** RUN action  */\n  useEffect(()=>{\n    dispatch(actionMusic());\n  },[dispatch])\n\n/** DRUPAL DATA CREATED BY CONTENT TYPE */\n  const musicData = useSelector(state => state.reducerMusic.music_data.data);\n  const musicDataFetched = useSelector(state => state.reducerMusic.music_fetched);\n  const musicDataInc = useSelector(state => state.reducerMusic.music_data.included);\n\n\n    console.log(\"MUSIC DATA\", musicData);\n    console.log(\"FETCHED\", musicDataFetched);\n    console.log(\"INCLUDED\", musicDataInc);\n\n    \n    const [arr,setArr] = useState([]);\n\n    /** MERGE ARRAY BY id */\n    function audioArray( arr1,arr2){\n      const arr = [];\n\n      /** GET AUDIO URI AND PUSH INTO THE ARR */\n      function getAudioUri(audioId, arr2){\n        arr2.map(item=>{\n          return audioId === item.id \n          && arr.push(item.attributes.uri)\n        })\n      }\n\n      /** GET AUDIO ID AND RUN FUNCTION TO GET URI */\n      arr2.map( item => {\n      return item.type === 'media--audio' &&\n          arr1.some(el => el.id === item.id) \n          && getAudioUri(item.relationships.field_media_audio_file.data.id, arr2)\n      })\n\n      return arr;\n    }\n\n    /** GET IMAGE URI */\n    function imageArray(id, arr2){\n      \n      const arr = [];\n      \n      /** GET IMAGE URI */\n      function getUri(imageId, arr2){\n        arr2.map(item => {\n          return item.id === imageId &&\n          arr.push(item.attributes.uri)\n        })\n      }  \n\n      /** GET ID FOR IMAGE URI */\n      arr2.map( item => {\n        return id === item.id && \n        getUri(item.relationships.field_media_image.data.id, arr2);\n      });\n\n      /** RETURN IMAGE-URI IN ARRAY */\n      return arr;\n    \n    }\n\n    /** GET YOUTBE - VIDEO URL */\n    function videoArray(id, arr2){\n      const arr = [];\n      arr2.map( item => {\n        return id === item.id &&\n        arr.push({\n          youtube:item.attributes.field_media_oembed_video, \n          name: item.attributes.name})\n      })\n      return arr;\n    }\n\n\n    useEffect(()=>{\n      const arr = [];\n      musicDataFetched &&\n      musicData.map((item) => {\n        const { attributes:{title, field_music_body:{processed}} } = item;\n        const { relationships:{field_music_audio:{data: audio}}} = item;\n        const { relationships:{field_music_image:{data:{id: imageId} }}} = item;\n        const { relationships:{field_music_video:{data:{id: videoId} }}} = item;\n        return arr.push({\n          id: item.id, \n          title:title, \n          body: processed,\n          audio: audioArray(audio, musicDataInc),\n          image: imageArray(imageId, musicDataInc),\n          video: videoArray(videoId, musicDataInc),\n        })\n      });\n\n      setArr(arr);\n\n    },[musicData, musicDataFetched, musicDataInc])\n\n    console.log(\"NEW ARRAY\", arr, id);\n  \n\n  return(\n    <div className=\"max-w-screen-xl p-10 m-auto\">\n      { musicDataFetched ?\n        /** SECOND CODTIONTION */\n        id \n        ? <MusicDetail index={id} arr={arr} />\n        : <MusicList listdata={arr} />\n        /******/\n        : <LoadingBar />\n      }\n    </div>\n  )\n\n}\n\nexport default Music;"]},"metadata":{},"sourceType":"module"}