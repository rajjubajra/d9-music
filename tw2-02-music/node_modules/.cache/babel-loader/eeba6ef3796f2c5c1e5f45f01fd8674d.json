{"ast":null,"code":"import _slicedToArray from\"/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';//import ImageOnload from '../components/ImageOnload';\nimport{actionGallery}from'../redux/actions';import Gear from'./Gear';import{jsx as _jsx}from\"react/jsx-runtime\";function Gallery(){var dispatch=useDispatch();useEffect(function(){dispatch(actionGallery());},[dispatch]);var state=useSelector(function(state){return state.reducerGallery.gallery_data.data;});var inc_data=useSelector(function(state){return state.reducerGallery.gallery_data.included;});var length=useSelector(function(state){return state.reducerGallery.gallery_dataLength;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),arr=_useState2[0],setArr=_useState2[1];console.log(\"gallery state\",state,\"include gallery\",inc_data,\"length\",length);useEffect(function(){var data=[];length>0&&state.map(function(item){var _item$attributes=item.attributes,title=_item$attributes.title,field_gallery_body=_item$attributes.field_gallery_body;console.log(\"loop 1\");inc_data.map(function(inc){if(inc.type==='file--file'){var uri=inc.attributes.uri;/** in order to avoide repeat loop */var hasId=data.some(function(key){return key.id===inc.id;});//console.log(hasId);\n!hasId&&data.push({id:inc.id,title:title,body:field_gallery_body.processed,image:uri.url});}});});setArr(data);},[inc_data,length,state]);console.log(\"gallery arr\",arr);return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-screen-xl m-auto p-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 grid-rows-3 gap-3 p-10\",children:arr.map(function(item){return/*#__PURE__*/_jsx(Gear,{title:item.title,src:item.image,text:item.body})/* <div key={item.id} className=\"m-12\">\n                <h1>{item.title}</h1>\n                <div>\n                  <ImageOnload \n                  cssClass=\"w-64\"\n                  src={item.image} \n                  alt=\"gallery\" />\n                </div>\n                <div dangerouslySetInnerHTML={{__html: item.body}} />\n            </div> */;})})});}export default Gallery;","map":{"version":3,"sources":["/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/src/page/Gallery.js"],"names":["React","useEffect","useState","useSelector","useDispatch","actionGallery","Gear","Gallery","dispatch","state","reducerGallery","gallery_data","data","inc_data","included","length","gallery_dataLength","arr","setArr","console","log","map","item","attributes","title","field_gallery_body","inc","type","uri","hasId","some","key","id","push","body","processed","image","url"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\n//import ImageOnload from '../components/ImageOnload';\nimport {actionGallery} from '../redux/actions';\nimport Gear from './Gear';\n\nfunction Gallery() {\n\n  const dispatch = useDispatch();\n\n  useEffect(()=>{\n      dispatch(actionGallery());\n  },[dispatch])\n\n  const state = useSelector(state => state.reducerGallery.gallery_data.data);\n  const inc_data = useSelector(state => state.reducerGallery.gallery_data.included);\n  const length = useSelector(state => state.reducerGallery.gallery_dataLength);\n\n  const [arr, setArr] = useState([]);\n\n  console.log(\"gallery state\", state, \"include gallery\", inc_data,\"length\", length);\n\n  useEffect(()=>{\n    const data = [];\n    length > 0 &&\n    state.map(item => {\n      const {attributes:{title, field_gallery_body}} = item;\n      console.log(\"loop 1\");\n\n      inc_data.map(inc => {\n        if(inc.type === 'file--file'){\n          const {attributes: {uri}} = inc;  \n          /** in order to avoide repeat loop */\n          const hasId = data.some(key => key.id === inc.id);\n          //console.log(hasId);\n          !hasId && data.push({\n            id: inc.id, \n            title: title, \n            body: field_gallery_body.processed, \n            image: uri.url})\n        }\n      })\n    })\n    setArr(data);\n  },[inc_data, length, state])\n\n  console.log(\"gallery arr\",arr);\n  \n  \n  return (\n    <div className=\"max-w-screen-xl m-auto p-10\">\n    <div className=\"grid grid-cols-3 grid-rows-3 gap-3 p-10\">\n      {\n        arr.map(item=>{\n          return(<Gear title={item.title} src={item.image} text={item.body} />\n            /* <div key={item.id} className=\"m-12\">\n                <h1>{item.title}</h1>\n                <div>\n                  <ImageOnload \n                  cssClass=\"w-64\"\n                  src={item.image} \n                  alt=\"gallery\" />\n                </div>\n                <div dangerouslySetInnerHTML={{__html: item.body}} />\n            </div> */\n          )\n        })\n      }\n    </div>\n    </div>\n  )\n\n}\n\nexport default Gallery\n"]},"metadata":{},"sourceType":"module"}