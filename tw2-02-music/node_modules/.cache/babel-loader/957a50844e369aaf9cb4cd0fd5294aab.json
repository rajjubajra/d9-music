{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{baseurl}from'../config/config';import{useDispatch,useSelector}from'react-redux';import ajax from'../config/ajax';import{actionSubscriptionForm}from'../redux/actions';import{CountryDropdown,RegionDropdown}from'react-country-region-selector';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SubscriptionForm(){var dispatch=useDispatch();var form=useSelector(function(state){return state.reducerSubscriptionForm.subscription_form_data.data;});var form_fetched=useSelector(function(state){return state.reducerSubscriptionForm.subscription_form_fetched;});//console.log(\"Conf message\", form_fetched && form);\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),region=_useState6[0],setRegion=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),country=_useState8[0],setCountry=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),submitForm=_useState10[0],setSubmitForm=_useState10[1];useEffect(function(){dispatch(actionSubscriptionForm());submitForm&&setName('');setEmail('');setRegion('');setCountry('');},[dispatch,submitForm]);console.log(name,email,region,country,\"sumbited\",submitForm);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data,webform_rest_url,axios,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();/** NOTE: Permission need to allowed to anonymouse user\n     * RESTful Web Services\n     *   - Access POST on Webform Submit resource\n     */data={\"webform_id\":\"fansclub\",\"name\":name,\"email\":email,\"country\":country,\"state\":region};console.log(\"DATA submitted\",data);webform_rest_url=\"\".concat(baseurl.URL,\"/webform_rest/submit\");_context.prev=4;_context.next=7;return ajax();case 7:axios=_context.sent;_context.next=10;return axios.post(webform_rest_url,data);case 10:response=_context.sent;response.status===200&&setSubmitForm(true);console.log(\"Data Posted:\",response);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](4);console.log(\"Submit Error\",_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full md:p-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl\",children:form_fetched&&form.attributes.title}),/*#__PURE__*/_jsx(\"div\",{children:form_fetched&&!submitForm&&form.attributes.description}),/*#__PURE__*/_jsx(\"div\",{className:\"text-1xl\",children:submitForm&&form_fetched&&form.attributes.settings.confirmation_message}),/*#__PURE__*/_jsx(\"div\",{className:submitForm?\"hidden\":\"w-full flex\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,method:\"post\",class:\"w-full mt-5 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full outline-none p-2 border-gray-500  border\",required:true,type:\"text\",id:\"name\",name:\"name\",placeholder:\"Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full outline-none border-gray-500 p-2 border-l border-r\",required:true,type:\"text\",id:\"email\",name:\"email\",placeholder:\"Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(CountryDropdown,{classes:\"w-full outline-none border-gray-500 p-2 border\",required:true,type:\"text\",id:\"country\",name:\"country\",placeholder:\"Country\",value:country,onChange:function onChange(val){return setCountry(val);}}),/*#__PURE__*/_jsx(RegionDropdown,{classes:\"border-l border-r border-b border-gray-500 outline-none px-3 py-2 w-full\",country:country,value:region,onChange:function onChange(val){return setRegion(val);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"border border-gray-500 px-4 py-2 mt-5 hover:bg-gray-500 hover:text-white cursor-pointer\",type:\"submit\",id:\"submit\",name:\"submit\",value:\"Submit\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:submitForm?\"flex\":\"hidden\",children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:form_fetched&&form.attributes.settings.submission_exception_message}})})]});}export default SubscriptionForm;","map":{"version":3,"sources":["/Users/rajju/Sites/REACT-WEBSITES/d9-music/tw2-02-music/src/page/SubscriptionForm.js"],"names":["React","useState","useEffect","baseurl","useDispatch","useSelector","ajax","actionSubscriptionForm","CountryDropdown","RegionDropdown","SubscriptionForm","dispatch","form","state","reducerSubscriptionForm","subscription_form_data","data","form_fetched","subscription_form_fetched","name","setName","email","setEmail","region","setRegion","country","setCountry","submitForm","setSubmitForm","console","log","handleSubmit","e","preventDefault","webform_rest_url","URL","axios","post","response","status","attributes","title","description","settings","confirmation_message","target","value","val","__html","submission_exception_message"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {baseurl} from '../config/config';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ajax from '../config/ajax';\nimport {actionSubscriptionForm} from '../redux/actions';\nimport { CountryDropdown, RegionDropdown } from 'react-country-region-selector';\n\n\n\nfunction SubscriptionForm() {\n\n  const dispatch = useDispatch();\n  const form = useSelector(state => state.reducerSubscriptionForm.subscription_form_data.data);\n  const form_fetched = useSelector(state => state.reducerSubscriptionForm.subscription_form_fetched);\n\n  //console.log(\"Conf message\", form_fetched && form);\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [region, setRegion] = useState('');\n  const [country, setCountry] = useState('');\n  const [submitForm, setSubmitForm] = useState(false);\n\n\n  useEffect(()=>{\n    \n    dispatch(actionSubscriptionForm())\n\n    submitForm &&\n    setName('');\n    setEmail('');\n    setRegion('');\n    setCountry('');\n\n\n  },[dispatch, submitForm])\n  \n\n\n  console.log(name, email, region, country,\"sumbited\", submitForm);\n\n  const handleSubmit = async (e) =>{\n    e.preventDefault();\n    /** NOTE: Permission need to allowed to anonymouse user\n     * RESTful Web Services\n     *   - Access POST on Webform Submit resource\n     */\n    \n    const data = {\n      \"webform_id\": \"fansclub\",\n      \"name\": name,\n      \"email\": email,\n      \"country\": country,\n      \"state\": region,\n    }\n    console.log(\"DATA submitted\",data);\n    const webform_rest_url = `${baseurl.URL}/webform_rest/submit`;\n\n    try{\n      const axios = await ajax(); //wait for initalized axios object\n      const response = await axios.post(webform_rest_url, data);\n      response.status === 200 && setSubmitForm(true);\n      console.log(\"Data Posted:\",response);\n    }catch(e){\n      console.log(\"Submit Error\",e);\n    }\n\n  }\n\n  return (\n    <div className=\"w-full md:p-10\">\n      <h1 className=\"text-3xl\">\n        {form_fetched && form.attributes.title} \n      </h1>\n      <div>\n        {form_fetched && !submitForm && form.attributes.description}\n      </div>\n      <div className=\"text-1xl\">\n        {submitForm && form_fetched && form.attributes.settings.confirmation_message }\n      </div>\n\n       {/** SUBSCRIPTION FORM */}\n      <div className={ submitForm ?  \"hidden\" : \"w-full flex\"}>\n        <form onSubmit={handleSubmit}  method=\"post\" class=\"w-full mt-5 flex flex-col\">\n        <div>\n          <input\n          className=\"w-full outline-none p-2 border-gray-500 \n          border\" \n          required\n          type=\"text\" \n          id=\"name\"  \n          name=\"name\"  \n          placeholder=\"Name\" \n          value={name}\n          onChange={(e)=>setName(e.target.value)}\n          />\n          <input \n          className=\"w-full outline-none border-gray-500 p-2\n          border-l border-r\"\n          required  \n          type=\"text\" \n          id=\"email\" \n          name=\"email\" \n          placeholder=\"Email\" \n          value={email}\n          onChange={(e)=>setEmail(e.target.value)}\n          />\n          <CountryDropdown \n          classes=\"w-full outline-none border-gray-500 p-2 border\"\n          required  \n          type=\"text\" \n          id=\"country\" \n          name=\"country\"\n          placeholder=\"Country\"\n          value={country}\n          onChange={(val)=>setCountry(val)}\n          />\n          <RegionDropdown\n          classes=\"border-l border-r border-b border-gray-500 outline-none px-3 py-2 w-full\"\n          country={country}\n          value={region}\n          onChange={(val) => setRegion(val)} />\n        </div>\n        \n        <div>\n          <input  \n          className=\"border border-gray-500 px-4 py-2 mt-5 hover:bg-gray-500 hover:text-white cursor-pointer\"  type=\"submit\" \n          id=\"submit\" \n          name=\"submit\" \n          value=\"Submit\" />\n        </div>          \n        </form>\n        \n      </div>\n  \n\n      {/** FORM SUBMITTED MESSAGE  */}\n      <div className={ submitForm ? \"flex\" : \"hidden\"} >\n        <div dangerouslySetInnerHTML={{__html:form_fetched \n        && form.attributes.settings.submission_exception_message}}  />\n      </div>\n  \n    </div>\n  )\n}\n\nexport default SubscriptionForm"]},"metadata":{},"sourceType":"module"}