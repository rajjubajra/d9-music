{"version":3,"sources":["components/ImageOnload.js","config/ajax.js","page/SubscriptionForm.js","page/ContactInfo.js","page/Contact.js"],"names":["ImageOnload","src","alt","cssClass","useState","loading","setLoading","console","log","useEffect","img","Image","onload","width","height","className","singleton","a","tokenURL","baseurl","URL","axios","get","withCredentials","response","csrf_token","data","create","baseURL","headers","params","_format","error","SubscriptionForm","dispatch","useDispatch","form","useSelector","state","reducerSubscriptionForm","subscription_form_data","form_fetched","subscription_form_fetched","name","setName","email","setEmail","region","setRegion","country","setCountry","submitForm","setSubmitForm","actionSubscriptionForm","handleSubmit","e","preventDefault","webform_rest_url","ajax","post","status","attributes","title","description","settings","confirmation_message","onSubmit","method","class","required","type","id","placeholder","value","onChange","target","classes","val","dangerouslySetInnerHTML","__html","submission_exception_message","ContactInfo","reducerContactInfo","contact_info_data","inc","included","fetched","contact_info_fetched","actionContactInfo","uri","url","field_contact_email","field_contact_booking_agency","map","item","Contact"],"mappings":"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","file":"static/js/13.9e45d2d6.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport LoadingBar from '../components/LoadingBar';\n\nfunction ImageOnload({src, alt, cssClass}) {\n\n  const [loading, setLoading] = useState(false);\n  //const [image, setImage] = useState('');\n  \n  console.log(\"loading\",loading);  \n\n  useEffect(()=>{\n    const img = new Image();\n        img.onload =() => {\n          // image has been loaded\n          setLoading(true);\n        };\n        img.src = src;\n  },[src])\n\n  return (\n    loading ?\n    <img \n      width=\"100%\"\n      height=\"100%\"\n      className={cssClass}\n      src={src} \n      alt={alt} \n    /> \n    : <LoadingBar /> \n  )\n}\n\nexport default ImageOnload","import axios from 'axios'\nimport {baseurl} from './config'\n\n/*\n * Wrapper for axios AJAX library.\n * \n * Basically, we use axios directly. But before axios can be used,\n * - we create an new axios instance\n * - give than instance an AJAX fetched CSRF token, which it will send as header 'X-CSRF-Token' with every request\n * - tell the instance that it should include credentials (cookie) with every request\n * - tell the instance that it should include the query parameter \"?_format=json\" with every request\n * \n * Finally, we wrap this activity in a Promise and return it, so that callers can\n * rely on the promise to call their own callback on successful resolution of the promise\n * or an error handler if the promise gets rejected.\n */\nlet singleton = null // a singleton instance of axios that the default init function returns\n\n// note the 'async' keyword, it allows us to call 'await' later\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default async () => {\n  if(!singleton) {\n    const tokenURL = baseurl.URL + '/session/token';\n    try {\n      const response = await axios.get(tokenURL, {\n        withCredentials: true // required to send auth cookie\n      })\n      const csrf_token = response.data\n      singleton = axios.create({\n        baseURL: baseurl.URL, // every request is relative to this URL\n        withCredentials: true, // include auth cookie in every request\n        headers: { 'X-CSRF-Token': csrf_token }, // include this header in every request\n        params: { _format: 'json' }, // add these query params to every request\n      })\n      console.log('Created new axios instance', singleton)\n    } catch(error) {\n      console.error(error)\n    }\n  }\n  console.log(\"SINGLETON\",singleton);\n  return singleton\n\n}","import React, {useState, useEffect} from 'react';\nimport {baseurl} from '../config/config';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ajax from '../config/ajax';\nimport {actionSubscriptionForm} from '../redux/actions';\nimport { CountryDropdown, RegionDropdown } from 'react-country-region-selector';\n\n\n\nfunction SubscriptionForm() {\n\n  const dispatch = useDispatch();\n  const form = useSelector(state => state.reducerSubscriptionForm.subscription_form_data.data);\n  const form_fetched = useSelector(state => state.reducerSubscriptionForm.subscription_form_fetched);\n\n  //console.log(\"Conf message\", form_fetched && form);\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [region, setRegion] = useState('');\n  const [country, setCountry] = useState('');\n  const [submitForm, setSubmitForm] = useState(false);\n\n\n  useEffect(()=>{\n    \n    dispatch(actionSubscriptionForm())\n\n    submitForm &&\n    setName('');\n    setEmail('');\n    setRegion('');\n    setCountry('');\n\n\n  },[dispatch, submitForm])\n  \n\n\n  console.log(name, email, region, country,\"sumbited\", submitForm);\n\n  const handleSubmit = async (e) =>{\n    e.preventDefault();\n    /** NOTE: Permission need to allowed to anonymouse user\n     * RESTful Web Services\n     *   - Access POST on Webform Submit resource\n     */\n    \n    const data = {\n      \"webform_id\": \"fansclub\",\n      \"name\": name,\n      \"email\": email,\n      \"country\": country,\n      \"state\": region,\n    }\n    console.log(\"DATA submitted\",data);\n    const webform_rest_url = `${baseurl.URL}/webform_rest/submit`;\n\n    try{\n      const axios = await ajax(); //wait for initalized axios object\n      const response = await axios.post(webform_rest_url, data);\n      response.status === 200 && setSubmitForm(true);\n      console.log(\"Data Posted:\",response);\n    }catch(e){\n      console.log(\"Submit Error\",e);\n    }\n\n  }\n\n  return (\n    <div className=\"w-full md:p-10\">\n      <h1 className=\"text-3xl\">\n        {form_fetched && form.attributes.title} \n      </h1>\n      <div>\n        {form_fetched && !submitForm && form.attributes.description}\n      </div>\n      <div className=\"text-1xl\">\n        {submitForm && form_fetched && form.attributes.settings.confirmation_message }\n      </div>\n\n       {/** SUBSCRIPTION FORM */}\n      <div className={ submitForm ?  \"hidden\" : \"w-full flex\"}>\n        <form onSubmit={handleSubmit}  method=\"post\" class=\"w-full mt-5 flex flex-col\">\n        <div>\n          <input\n          className=\"w-full outline-none p-2 border-gray-500 \n          border\" \n          required\n          type=\"text\" \n          id=\"name\"  \n          name=\"name\"  \n          placeholder=\"Name\" \n          value={name}\n          onChange={(e)=>setName(e.target.value)}\n          />\n          <input \n          className=\"w-full outline-none border-gray-500 p-2\n          border-l border-r\"\n          required  \n          type=\"text\" \n          id=\"email\" \n          name=\"email\" \n          placeholder=\"Email\" \n          value={email}\n          onChange={(e)=>setEmail(e.target.value)}\n          />\n          <CountryDropdown \n          classes=\"w-full outline-none border-gray-500 p-2 border\"\n          required  \n          type=\"text\" \n          id=\"country\" \n          name=\"country\"\n          placeholder=\"Country\"\n          value={country}\n          onChange={(val)=>setCountry(val)}\n          />\n          <RegionDropdown\n          classes=\"border-l border-r border-b border-gray-500 outline-none px-3 py-2 w-full\"\n          country={country}\n          value={region}\n          onChange={(val) => setRegion(val)} />\n        </div>\n        \n        <div>\n          <input  \n          className=\"border border-gray-500 px-4 py-2 mt-5 hover:bg-gray-500 hover:text-white cursor-pointer\"  type=\"submit\" \n          id=\"submit\" \n          name=\"submit\" \n          value=\"Submit\" />\n        </div>          \n        </form>\n        \n      </div>\n  \n\n      {/** FORM SUBMITTED MESSAGE  */}\n      <div className={ submitForm ? \"flex\" : \"hidden\"} >\n        <div dangerouslySetInnerHTML={{__html:form_fetched \n        && form.attributes.settings.submission_exception_message}}  />\n      </div>\n  \n    </div>\n  )\n}\n\nexport default SubscriptionForm","import {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {actionContactInfo} from '../redux/actions';\nimport ImageOnload from '../components/ImageOnload';\n\n\nfunction ContactInfo() {\n\n  const dispatch = useDispatch()\n\n  const data = useSelector(state => state.reducerContactInfo.contact_info_data.data);\n  const inc  = useSelector(state => state.reducerContactInfo.contact_info_data.included);\n  const fetched = useSelector(state => state.reducerContactInfo.contact_info_fetched);\n  \n  useEffect(()=> {\n    dispatch(actionContactInfo());\n  },[dispatch]);\n\n  \n  return (\n        <>\n            <h2 className=\"text-3xl py-10\">Contact</h2>\n\n            <ImageOnload \n            cssClass=\"w-full h-40 md:w-1/2 md:h-96 object-cover\"\n            src={fetched && inc[1].attributes.uri.url} \n            alt=\"Music Page\"\n            />\n\n            <div className=\"py-10\">\n              <h3 className=\"text-2xl\">{fetched && data[0].attributes.title}</h3>\n              <p>{fetched && data[0].attributes.field_contact_email}</p>  \n            </div>\n\n            <div className=\"py-5 md:py-10\">\n              <h3 className=\"text-2xl mb-3\">Booking Agencies</h3>\n              <ul className=\"grid gap-y-4\">\n                {\n                  fetched && \n                  data[0].attributes.field_contact_booking_agency.map(item=>{\n                    return <li>{item.uri}|{item.title}</li>\n                  })\n                }\n              </ul>\n            </div>\n      </>\n  )\n}\n\nexport default ContactInfo\n","//import ContactForm from './ContactForm';\nimport SubscriptionFrom from './SubscriptionForm';\nimport ContactInfo from './ContactInfo';\n\n\n\nfunction Contact() {\n  \n\n  return (\n    <div className=\"grid grid-cols-12 max-w-screen-xl m-auto p-10\">\n      \n      <div className=\"col-span-12 md:col-span-4\">\n        <ContactInfo />\n      </div>\n\n      <div className=\"col-span-12 md:col-span-8 mt-10 md:mt-0\">\n        <SubscriptionFrom />\n      </div>\n      \n    </div>\n  )\n}\n\nexport default Contact"],"sourceRoot":""}